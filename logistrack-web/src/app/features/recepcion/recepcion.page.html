<section class="p-4 space-y-4" *ngIf="vm$ | async as vm">
  <h2 class="text-2xl font-semibold">Recepción</h2>

  <!-- Filtros -->
  <div class="bg-gray-50 rounded-2xl p-4 shadow-sm">
    <app-filters-bar
      [fields]="fields"
      [value]="vm.q"
      [autoApply]="true"
      (filtersChange)="onFilters($event)"
      (cleared)="onCleared()">
    </app-filters-bar>
  </div>

  <!-- Estados -->
  <app-error-state
    *ngIf="vm.error"
    [message]="'No se pudo cargar la recepción.'"
    (retry)="onFilters(vm.q)">
  </app-error-state>

  <app-empty-state
    *ngIf="!vm.error && !vm.loading && vm.count === 0"
    title="Sin registros">
  </app-empty-state>

  <!-- Tabla -->
  <div *ngIf="!vm.error && vm.count > 0" class="bg-gray-50 rounded-2xl p-2 shadow-sm">
    <app-table
      [columns]="columns"
      [data]="vm.data"
      [loading]="vm.loading"
      [length]="vm.count"
      [rows]="ROWS"
      [pageIndex]="vm.page - 1"
      [first]="firstOf(vm.page)"
      [sortField]="vm.sortField"
      [sortOrder]="vm.sortOrder"
      (page)="onPage($event, vm.q)">
    </app-table>
  </div>
</section>
